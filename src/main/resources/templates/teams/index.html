<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Teams</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<header class="site-header">
    <div class="container header-inner">
        <div class="brand"><span style="margin-right:8px;">üèà</span><a th:href="@{/}">FantasyFootball</a></div>
        <nav class="nav">
            <a th:href="@{/players}">Players</a>
            <a th:href="@{/teams}" aria-current="page">Teams</a>
            <a th:href="@{/stats}">Stats</a>
        </nav>
    </div>
</header>

<main class="container" style="padding:24px 0;">
    <h1 style="margin:0 0 6px;">Teams</h1>
    <p class="muted" style="margin:0 0 16px;">
        <span th:text="${teamCount}">0</span> teams
    </p>

    <input id="teamSearch" class="teams-search" type="search"
           placeholder="Search teams‚Ä¶" autocomplete="off" />

    <div class="teams-grid" id="teamsGrid">
        <div class="team-card" th:each="t : ${teams}"
             th:attr="data-name=${t.name}, data-code=${t.code}">
            <div class="team-badge" th:text="${t.code}">KC</div>
            <span class="team-name" th:text="${t.name}">Chiefs</span>
        </div>
    </div>

    <p id="noResults" class="muted" style="display:none; padding:12px 0;">No teams match your search.</p>
</main>

<footer class="site-footer">
    <div class="container footer-inner">
        <span>FantasyFootball</span>
        <span th:text="'¬© ' + ${#dates.year(#dates.createNow())}">¬© 2024</span>
    </div>
</footer>

<script>
    const input = document.getElementById('teamSearch');
    const cards = document.querySelectorAll('.team-card');
    const noResults = document.getElementById('noResults');

    input.addEventListener('input', () => {
        const q = input.value.trim().toLowerCase();
        let visible = 0;
        cards.forEach(card => {
            const match = !q
                || card.dataset.name.toLowerCase().includes(q)
                || card.dataset.code.toLowerCase().includes(q);
            card.style.display = match ? '' : 'none';
            if (match) visible++;
        });
        noResults.style.display = visible === 0 ? '' : 'none';
    });
</script>
</body>
</html>
